<!-- When using partials, we DO NOT want to extend the base.html -->
{% comment %} {% extends "base.html" %} {% endcomment %}

<!-- define the block content to be injected -->

{% block content %}

<div id="Orders">
<h5 class="">
	{{customer}}  placed 
	{{customer.NumberOfOrders}} Orders 
</h5>
<div class="" >
	{% for order in customer.CustomerOrders %}
		<div class="card-body border-0">
			<div class="accordion-item">
				<h2 class="accordion-header" id="flush-heading{{forloop.counter}}">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{forloop.counter}}" aria-expanded="false" aria-controls="flush-collapse{{forloop.counter}}">
						{{forloop.counter}}. Order ID: {{order.order_id}} placed on {{order.order_date}}
					</button>
				</h2>
				<div id="flush-collapse{{forloop.counter}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{forloop.counter}}" data-bs-parent="#accordionFlushExample">
					<div class="accordion-body">
						<table class="table" style="width:100%; border: 2px solid #2196f3; border-radius: 10px; padding: 10px; background-color: #b2ebf2; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
							<tr>
								<th colspan=4>
									{{forloop.counter}}. Order ID: {{order.order_id}} placed on {{order.order_date}} 
								</th>
							</tr>
							<tr>
								<th> Name </th>
								<th> Qty </th>
								<th class="text-end pe-2"> Price </th>
								<th class="text-end pe-2"> Total </th>
							</tr>
							{% for anOrderDetail in order.AllOrderDetails %}
							<tr class="p-2">
								<td>{{anOrderDetail.product.product_name}} </td>
								<td>{{anOrderDetail.quantity}} </td>
								<td class="text-end pe-1"> ${{anOrderDetail.product.price}}</td>
								<td class="text-end pe-1"> ${{anOrderDetail.Total}} </td>
							</tr>
							{% endfor %}
							<tr> 
								<td colspan="3" class="text-end pe-2"> Order Total</td>
								<td class="text-end pe-2"> ${{order.OrderTotal}}</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	{% endfor %}
</div>
<div style="padding-left:90%;padding-bottom:5px;">
	<a class="btn btn-outline-info mt-3" href = "{% url 'DjTraders.Customers' %}" style="right: 0; bottom: 20px; margin-right: 20px; border-radius: 5px;">
		<i class="fa-solid fa-rotate-left" style="color:black;"></i>
		Back
	</a>
</div>
</div>
{% endblock %}