<!-- tell the page to "use" the base template -->
{% extends "base.html" %}

<!-- define the block content to be injected -->

{% block content %}
<div class="card my-4">
	<div class="h6 card-header py-4 custom-header">
        {{customer.customer_name}}
    </div>

	<div style="">
		{{OrdersPlot|safe}}
	</div>
 
    <div class="card-body border-0 custom-body">
        <div class="row row-cols-2" id="">
            <div class="col-5">
              <h2 class="">
                  Customer Information
              </h2>
                <div>
                    <thead>
                        <th>
                            <td class="text-center" style=""> Customer :</td>
                            <td>{{customer.customer_name}}</td>
                        </th>
                        <br>
                        <th>
                            <td class="text-center" style=""> Contact :</td>
                            <td>{{customer.contact_name}}</td>
                        </th>
                        <br>
                        <th>
                            <td class="text-center" style="width:35%">Address :</td>
                            <td>{{customer.address}}</td>
                        </th>
                        <br>
                        <th>
                            <td class="" style="">City :</td>
                            <td>{{customer.city}}</td>
                        </th>
                        <br>
						<th>
                            <td class="" style="">Postal Code :</td>
                            <td>{{customer.postal_code}}</td>
                        </th>
                        <br>
						<th>
                            <td class="" style="">Country :</td>
                            <td>{{customer.country}}</td>
                        </th>
                        <br>
                    </thead>
                   
                   
                </div>
            </div>
           
 
            <div class="col-7">
                <h5 class="">
                    {{customer.contact_name}}  placed
                    {{customer.NumberOfOrders}} Orders
                </h5>
                <div class="" id="Orders">
				{% for order in customer.CustomerOrders %}
				<div class="card-body border-0">
					<div class="accordion-item">
						<h2 class="accordion-header" id="flush-heading{{forloop.counter}}">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{forloop.counter}}" aria-expanded="false" aria-controls="flush-collapse{{forloop.counter}}">
								{{forloop.counter}}. Order ID: {{order.order_id}} placed on {{order.order_date}}
							</button>
						</h2>
						<div id="flush-collapse{{forloop.counter}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{forloop.counter}}" data-bs-parent="#accordionFlushExample">
							<div class="accordion-body">
								<table class="table" style="width:100%">
									<tr>
										<th colspan=4>
											{{forloop.counter}}. Order ID: {{order.order_id}} placed on {{order.order_date}} 
										</th>
									</tr>
									<tr>
										<th> Name </th>
										<th> Qty </th>
										<th class="text-end pe-2"> Price </th>
										<th class="text-end pe-2"> Total </th>
									</tr>
									{% for anOrderDetail in order.AllOrderDetails %}
									<tr class="p-2">
										<td>{{anOrderDetail.product.product_name}} </td>
										<td>{{anOrderDetail.quantity}} </td>
										<td class="text-end pe-1"> ${{anOrderDetail.product.price}}</td>
										<td class="text-end pe-1"> ${{anOrderDetail.Total}} </td>
									</tr>
									{% endfor %}
									<tr> 
										<td colspan="3" class="text-end pe-2"> Order Total</td>
										<td class="text-end pe-2"> ${{order.OrderTotal}}</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
			</div>
		</div>
	</div>


	<div style="padding-left:90%;padding-bottom:5px;">
		<a class="btn btn-outline-info mt-3" href = "{% url 'DjTraders.Customers' %}" style="right: 0; bottom: 20px; margin-right: 20px; border-radius: 5px;">
			<i class="fa-solid fa-rotate-left" style="color:black;"></i>
			Back
		</a>
	</div>
</div>


{% endblock %}